{% extends "base.html" %}
{% block title %}Danh sÃ¡ch TÃ i sáº£n{% endblock %}

{% block content %}
<h2>ğŸ“¦ Danh sÃ¡ch TÃ i sáº£n</h2>

<form method="get" class="filters">
  <input type="text" name="search" placeholder="TÃ¬m theo tÃªn..." value="{{ search or '' }}">
  <input type="text" name="category" placeholder="Danh má»¥c..." value="{{ category or '' }}">
  <select name="status">
    <option value="">-- Tráº¡ng thÃ¡i --</option>
    <option value="Sáºµn sÃ ng" {% if status == 'Sáºµn sÃ ng' %}selected{% endif %}>Sáºµn sÃ ng</option>
    <option value="Äang cho thuÃª" {% if status == 'Äang cho thuÃª' %}selected{% endif %}>Äang cho thuÃª</option>
    <option value="Báº£o trÃ¬" {% if status == 'Báº£o trÃ¬' %}selected{% endif %}>Báº£o trÃ¬</option>
    <option value="Ngá»«ng sá»­ dá»¥ng" {% if status == 'Ngá»«ng sá»­ dá»¥ng' %}selected{% endif %}>Ngá»«ng sá»­ dá»¥ng</option>
    <option value="Chá» xá»­ lÃ½" {% if status == 'Chá» xá»­ lÃ½' %}selected{% endif %}>Chá» xá»­ lÃ½</option>
  </select>
  <button type="submit">ğŸ” Lá»c</button>
  <a href="/assets">ğŸ§¹ XoÃ¡ lá»c</a>
</form>

<div style="margin: 15px 0;">
  <a href="/assets/add" class="btn btn-add">â• ThÃªm tÃ i sáº£n</a>
  <a href="/assets/export" class="btn btn-export">ğŸ“¥ Xuáº¥t CSV</a>
</div>

{% if assets %}
<table>
  <thead>
    <tr>
      <th>áº¢nh</th>
      <th>TÃªn</th>
      <th>MÃ£</th>
      <th>Danh má»¥c</th>
      <th>Sá»‘ lÆ°á»£ng</th>
      <th>Tráº¡ng thÃ¡i</th>
      <th>MÃ´ táº£</th>
      <th>HÃ nh Ä‘á»™ng</th>
    </tr>
  </thead>
  <tbody>
  {% for asset in assets %}
    <tr>
      <td>
        {% if asset.image_path %}
          <img src="/{{ asset.image_path }}" class="asset-img" style="max-width:80px; border-radius:4px;">
        {% else %}<i>KhÃ´ng cÃ³</i>{% endif %}
      </td>
      <td><a href="/assets/view/{{ asset.id }}">{{ asset.name }}</a></td>
      <td>{{ asset.code }}</td>
      <td>{{ asset.category }}</td>
      <td>{{ asset.quantity }}</td>
      <td>
        <span class="status-tag status-{{ asset.status|lower|replace(' ', '-') }}">
          {{ asset.status }}
        </span>
      </td>
      <td>{{ asset.description[:100] }}{% if asset.description|length > 100 %}...{% endif %}</td>
      <td>
        <a href="/assets/edit/{{ asset.id }}" class="btn btn-edit">âœï¸</a>
        <form method="post" action="/assets/delete/{{ asset.id }}" style="display:inline;" onsubmit="return confirm('XÃ¡c nháº­n xoÃ¡?');">
          <button type="submit" class="btn btn-delete">ğŸ—‘ï¸</button>
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% else %}
<p><i>KhÃ´ng tÃ¬m tháº¥y tÃ i sáº£n.</i></p>
{% endif %}
{% endblock %}
